<div class="col" id="product-{{ product.id }}">
    <div class="card h-100 shadow border-warning">
        <div class="card-header bg-warning text-dark">
            <strong>‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</strong>
        </div>
        <div class="card-body">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
            <div id="edit-messages-{{ product.id }}"></div>

            <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <form hx-post="/admin/products/{{ product.id }}/edit"
                  hx-target="#product-{{ product.id }}"
                  hx-swap="outerHTML">
                
                <!-- –ù–∞–∑–≤–∞–Ω–∏–µ -->
                <div class="mb-2">
                    <label for="name-{{ product.id }}" class="form-label small mb-1">–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                    <input type="text" 
                           class="form-control form-control-sm" 
                           id="name-{{ product.id }}" 
                           name="name"
                           value="{{ product.name }}"
                           required>
                </div>

                <!-- –û–ø–∏—Å–∞–Ω–∏–µ -->
                <div class="mb-2">
                    <label for="description-{{ product.id }}" class="form-label small mb-1">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea class="form-control form-control-sm" 
                              id="description-{{ product.id }}" 
                              name="description"
                              rows="2">{{ product.description or '' }}</textarea>
                </div>

                <!-- –¶–µ–Ω—ã –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ -->
                <div class="row mb-2">
                    <div class="col-6">
                        <label for="price_shmeckles-{{ product.id }}" class="form-label small mb-1">–®–º–µ–∫–µ–ª–∏</label>
                        <input type="number" 
                               class="form-control form-control-sm" 
                               id="price_shmeckles-{{ product.id }}" 
                               name="price_shmeckles"
                               value="{{ product.price_shmeckles }}"
                               step="0.01"
                               required>
                    </div>
                    <div class="col-6">
                        <label for="price_flurbos-{{ product.id }}" class="form-label small mb-1">–§–ª—É—Ä–±–æ</label>
                        <input type="number" 
                               class="form-control form-control-sm" 
                               id="price_flurbos-{{ product.id }}" 
                               name="price_flurbos"
                               value="{{ product.price_flurbos }}"
                               step="0.01"
                               required>
                    </div>
                </div>

                <!-- URL –∫–∞—Ä—Ç–∏–Ω–∫–∏ -->
                <div class="mb-2">
                    <label for="image_url-{{ product.id }}" class="form-label small mb-1">URL –∫–∞—Ä—Ç–∏–Ω–∫–∏</label>
                    <input type="text" 
                           class="form-control form-control-sm" 
                           id="image_url-{{ product.id }}" 
                           name="image_url"
                           value="{{ product.image_url or '' }}"
                           placeholder="https://example.com/image.jpg">
                </div>

                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è -->
                <div class="mb-2">
                    <label for="category_id-{{ product.id }}" class="form-label small mb-1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select class="form-select form-select-sm" 
                            id="category_id-{{ product.id }}" 
                            name="category_id">
                        <option value="">–ë–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}" 
                                    {% if product.category_id == category.id %}selected{% endif %}>
                                {{ category.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>

                <!-- –¢–µ–≥–∏ (–∫–æ–º–ø–∞–∫—Ç–Ω–æ) -->
                <div class="mb-3">
                    <label class="form-label small mb-1">–¢–µ–≥–∏</label>
                    <div class="d-flex flex-wrap gap-1">
                        {% for tag in tags %}
                            <div class="form-check form-check-inline mb-0">
                                <input class="form-check-input" 
                                       type="checkbox" 
                                       id="tag_{{ product.id }}_{{ tag.id }}" 
                                       name="tag_ids"
                                       value="{{ tag.id }}"
                                       {% if tag.id in product_tag_ids %}checked{% endif %}>
                                <label class="form-check-label small" for="tag_{{ product.id }}_{{ tag.id }}">
                                    {{ tag.name }}
                                </label>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ -->
                <div class="d-flex gap-2">
                    <button type="submit" class="btn btn-success btn-sm flex-grow-1">
                        üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                    </button>
                    <button type="button" 
                            class="btn btn-secondary btn-sm"
                            hx-get="/product/{{ product.id }}"
                            hx-target="#product-{{ product.id }}"
                            hx-swap="outerHTML">
                        ‚ùå –û—Ç–º–µ–Ω–∞
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>
