# üìö –ó–∞–Ω—è—Ç–∏–µ ‚Ññ2: Cookie-Based Authentication (–ß–∞—Å—Ç—å 8)

## –ö–æ–º–º–∏—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ –≤ —Å–∏—Å—Ç–µ–º–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

---

## üéØ –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ—Ö —Ñ–∏—á –º—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å –Ω–µ–ø—Ä–∏—è—Ç–Ω–æ–π —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å—é: –Ω–∏—á–µ–≥–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ. –§–æ—Ä–º—ã –≤—Ö–æ–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å –Ω–µ —Ç—É–¥–∞. JWT —Ç–æ–∫–µ–Ω—ã –Ω–µ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–ª–∏—Å—å. –í–∞–ª–∏–¥–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ñ–æ—Ä–º. SQLAlchemy –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª–∞ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ú—ã –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–ª–∏ –º–Ω–æ–≥–æ –∫–æ–¥–∞, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É fastapi-users, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–∏–ª–∏ SQLAlchemy —Å strict —Ä–µ–∂–∏–º–æ–º. –ù–µ–∏–∑–±–µ–∂–Ω–æ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–µ—Ç—Å—è.

–í–∞–∂–Ω–æ –Ω–µ –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å, –∞ –º–µ—Ç–æ–¥–∏—á–Ω–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –±–∞–≥–∏ –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º. –ö–∞–∂–¥–∞—è –æ—à–∏–±–∫–∞ –¥–∞—ë—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä—ë–º –≤—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏—è.

---

## üî¥ –ë–∞–≥ 1: –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–æ—É—Ç–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –°–∏–º–ø—Ç–æ–º—ã

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ–π—Ç–∏ —Ñ–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∞—Å—å –Ω–∞ `/auth/login`, –Ω–æ –ø–æ–ª—É—á–∞–ª–∞ 404 Not Found. –í –ª–æ–≥–∞—Ö –Ω–µ –±—ã–ª–æ –Ω–∏–∫–∞–∫–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –¥–ª—è —ç—Ç–æ–≥–æ –ø—É—Ç–∏.

### –ü—Ä–∏—á–∏–Ω–∞

–£ –Ω–∞—Å –±—ã–ª–æ –¥–≤–∞ –Ω–∞–±–æ—Ä–∞ —Ä–æ—É—Ç–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ü–µ—Ä–≤—ã–π ‚Äî –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ fastapi-users, –∫–æ—Ç–æ—Ä—ã–π –º—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏ –≤ `main.py`:

```python
app.include_router(
    fastapi_users.get_auth_router(auth_backend),
    prefix="/auth/jwt",
    tags=["auth"]
)
```

–≠—Ç–∏ —Ä–æ—É—Ç—ã –∂–∏–≤—É—Ç –ø–æ –ø—É—Ç—è–º `/auth/jwt/login`, `/auth/jwt/logout` –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å JSON. –í—Ç–æ—Ä–æ–π –Ω–∞–±–æ—Ä ‚Äî –Ω–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π `routes/auth.py` –¥–ª—è HTML-—Ñ–æ—Ä–º.

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –º—ã –Ω–∞–∑–≤–∞–ª–∏ –Ω–∞—à–∏ —Ä–æ—É—Ç—ã –ø—Ä–æ—Å—Ç–æ `/auth/login` –∏ `/auth/register`, –¥—É–º–∞—è —á—Ç–æ —ç—Ç–æ –Ω–µ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å `/auth/jwt/login`. –ù–æ –∫–æ–≥–¥–∞ –ø–æ–¥–∫–ª—é—á–∞–ª–∏ —Ä–æ—É—Ç–µ—Ä, –º—ã –∑–∞–±—ã–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Ñ–∏–∫—Å.

### –†–µ—à–µ–Ω–∏–µ

–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª–∏ HTML-—Ä–æ—É—Ç—ã –≤ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–º–µ–Ω–∞:

```
/auth/login       ‚Üí /auth/login-page   (GET ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É)
/auth/login       ‚Üí /auth/login-form   (POST ‚Äî –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ñ–æ—Ä–º—É)
/auth/register    ‚Üí /auth/register-form (POST)
```

–û–±–Ω–æ–≤–∏–ª–∏ —Ñ–æ—Ä–º—ã –≤ `auth.html`:

```html
<form hx-post="/auth/login-form">...</form>
<form hx-post="/auth/register-form">...</form>
```

–¢–µ–ø–µ—Ä—å –ø—É—Ç–∏ –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç. API-—Ä–æ—É—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ `/auth/jwt/*`, HTML-—Ä–æ—É—Ç—ã –ø–æ `/auth/login-page` –∏ `/auth/*-form`.

### –£—Ä–æ–∫

–ö–æ–≥–¥–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç–µ —Å—Ç–æ—Ä–æ–Ω–Ω—é—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∏–∑—É—á–∏—Ç–µ –µ—ë —Ä–æ—É—Ç—ã **–¥–æ** —Å–æ–∑–¥–∞–Ω–∏—è —Å–≤–æ–∏—Ö. –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –∏–º—ë–Ω ‚Äî —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –∏–ª–∏ –±–æ–ª–µ–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π.

---

## üî¥ –ë–∞–≥ 2: JWT –Ω–µ –¥–µ–∫–æ–¥–∏—Ä—É–µ—Ç—Å—è (audience mismatch)

### –°–∏–º–ø—Ç–æ–º—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ cookie —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–ª–∞—Å—å, –Ω–æ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ `get_current_user_from_cookie` –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ `None`. –í –ª–æ–≥–∞—Ö –æ—à–∏–±–∫–∞: `Invalid audience`.

### –ü—Ä–∏—á–∏–Ω–∞

FastAPI Users –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ JWT –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `"aud": ["fastapi-users:auth"]` –≤ payload. –≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –ø–æ–ª–µ JWT, –∫–æ—Ç–æ—Ä–æ–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç **–∞—É–¥–∏—Ç–æ—Ä–∏—é** ‚Äî –¥–ª—è –∫–æ–≥–æ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–æ–∫–µ–Ω.

–ù–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è `get_current_user_from_cookie` –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–ª–∞ —Ç–æ–∫–µ–Ω —Ç–∞–∫:

```python
payload = jwt.decode(token, SECRET_KEY, algorithms=["HS256"])
```

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ PyJWT –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç** –ø–æ–ª–µ `aud` –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏, –µ—Å–ª–∏ –º—ã –µ–≥–æ —è–≤–Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º. –ù–æ –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç `aud`, –∞ –º—ã –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º –æ–∂–∏–¥–∞–µ–º—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é, PyJWT —Å—á–∏—Ç–∞–µ—Ç —ç—Ç–æ **–æ—à–∏–±–∫–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `InvalidAudienceError`.

### –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä `audience` –ø—Ä–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–∏:

```python
payload = jwt.decode(
    token,
    SECRET_KEY,
    algorithms=["HS256"],
    audience=["fastapi-users:auth"]  # ‚Üê –Ø–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º –æ–∂–∏–¥–∞–µ–º—É—é –∞—É–¥–∏—Ç–æ—Ä–∏—é
)
```

–¢–µ–ø–µ—Ä—å PyJWT –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: –ø–æ–ª–µ `aud` –≤ —Ç–æ–∫–µ–Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –æ–∂–∏–¥–∞–µ–º—ã–º `["fastapi-users:auth"]`. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç ‚Äî –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äî –æ—à–∏–±–∫–∞.

### –£—Ä–æ–∫

–ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å JWT –æ—Ç —Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ **—á—Ç–æ –∏–º–µ–Ω–Ω–æ** –æ–Ω–∞ –∫–ª–∞–¥—ë—Ç –≤ —Ç–æ–∫–µ–Ω. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∞–π—Ç jwt.io –¥–ª—è –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ payload. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –∫–æ–¥ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º —Å —Ç–µ–º, —á—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∞.

---

## üî¥ –ë–∞–≥ 3: HTML5 –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ URL

### –°–∏–º–ø—Ç–æ–º—ã

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —Å–æ–∑–¥–∞—Ç—å —Ç–æ–≤–∞—Ä –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è `image_url`, –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫–∞–∑—ã–≤–∞–ª—Å—è –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ä–º—É. –ü–æ—è–≤–ª—è–ª–æ—Å—å —Å–æ–æ–±—â–µ–Ω–∏–µ: "Please enter a URL" (–í–≤–µ–¥–∏—Ç–µ URL).

### –ü—Ä–∏—á–∏–Ω–∞

–í `admin_product.html` –ø–æ–ª–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏ –±—ã–ª–æ –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫:

```html
<input type="url" name="image_url">
```

HTML5 —Ç–∏–ø `type="url"` –≤–∫–ª—é—á–∞–µ—Ç **–≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é** –±—Ä–∞—É–∑–µ—Ä–∞. –û–Ω —Ç—Ä–µ–±—É–µ—Ç, —á—Ç–æ–±—ã –∑–Ω–∞—á–µ–Ω–∏–µ –ª–∏–±–æ –±—ã–ª–æ –ø—É—Å—Ç—ã–º (–µ—Å–ª–∏ –Ω–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–∞ `required`), –ª–∏–±–æ –±—ã–ª–æ –≤–∞–ª–∏–¥–Ω—ã–º URL, –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è —Å `http://` –∏–ª–∏ `https://`.

–ù–æ –ø—É—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ `""` –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤–∞–ª–∏–¥–Ω—ã–º URL –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É HTML5! –ë—Ä–∞—É–∑–µ—Ä –æ–∂–∏–¥–∞–µ—Ç –ª–∏–±–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–æ–æ–±—â–µ (–ø–æ–ª–µ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ), –ª–∏–±–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π URL.

–ö–æ–≥–¥–∞ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏ —Ñ–æ—Ä–º—É —Å –ø—É—Å—Ç—ã–º –ø–æ–ª–µ–º, –±—Ä–∞—É–∑–µ—Ä –≤–∏–¥–µ–ª `value=""` –∏ –±–ª–æ–∫–∏—Ä–æ–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫—É.

### –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–∏–ª–∏ —Ç–∏–ø –ø–æ–ª—è –Ω–∞ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç:

```html
<input type="text" name="image_url">
```

–¢–µ–ø–µ—Ä—å –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç URL-–≤–∞–ª–∏–¥–∞—Ü–∏—é. –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–æ–ø—É—Å—Ç–∏–º–∞. –ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è URL, –º—ã –º–æ–∂–µ–º –¥–æ–±–∞–≤–∏—Ç—å –µ—ë –Ω–∞ –±—ç–∫–µ–Ω–¥–µ —á–µ—Ä–µ–∑ Pydantic:

```python
from pydantic import HttpUrl

class ProductCreate(BaseModel):
    image_url: HttpUrl | None = None
```

Pydantic –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ñ–æ—Ä–º–∞—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–¥–∞–Ω–æ. `None` –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –±—É–¥—É—Ç –¥–æ–ø—É—Å—Ç–∏–º—ã.

### –£—Ä–æ–∫

HTML5 –≤–∞–ª–∏–¥–∞—Ü–∏—è —É–¥–æ–±–Ω–∞ –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ–π. –¢–∏–ø `type="url"` —Ö–æ—Ä–æ—à –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π, –≥–¥–µ URL **–¥–æ–ª–∂–µ–Ω** –±—ã—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º. –î–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `type="text"` –∏ –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üî¥ –ë–∞–≥ 4: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Form –¥–ª—è —Å–ø–∏—Å–∫–æ–≤

### –°–∏–º–ø—Ç–æ–º—ã

–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ FastAPI –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É 422: `Field required: tag_ids`.

### –ü—Ä–∏—á–∏–Ω–∞

–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –º—ã –æ–±—ä—è–≤–ª—è–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ç–∞–∫:

```python
tag_ids: list[int] = Form([])  # ‚Üê –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!
```

–ú—ã –¥—É–º–∞–ª–∏, —á—Ç–æ `Form([])` –æ–∑–Ω–∞—á–∞–µ—Ç "–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ‚Äî –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫". –ù–æ `Form()` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ `Field()` –≤ Pydantic. –ü–µ—Ä–≤—ã–π –∞—Ä–≥—É–º–µ–Ω—Ç `Form()` —ç—Ç–æ –Ω–µ default value, –∞ **–ø—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è** –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —É–∫–∞–∑–∞—Ç—å default:

```python
tag_ids: list[int] = Form(default=[])  # ‚Üê –ü—Ä–∞–≤–∏–ª—å–Ω–æ!
```

–ë–µ–∑ `default=`, FastAPI —Å—á–∏—Ç–∞–µ—Ç –ø–æ–ª–µ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º**. –ö–æ–≥–¥–∞ –Ω–∏ –æ–¥–∏–Ω —á–µ–∫–±–æ–∫—Å –Ω–µ –≤—ã–±—Ä–∞–Ω, –±—Ä–∞—É–∑–µ—Ä –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª–µ `tag_ids` –≤–æ–æ–±—â–µ, –∏ FastAPI –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

### –†–µ—à–µ–Ω–∏–µ

–ò–∑–º–µ–Ω–∏–ª–∏ –Ω–∞:

```python
tag_ids: list[int] = Form(default=[])
```

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, FastAPI –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ `[]`. –¢–æ–≤–∞—Ä —Å–æ–∑–¥–∞—ë—Ç—Å—è –±–µ–∑ —Ç–µ–≥–æ–≤, —á—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

### –£—Ä–æ–∫

–ß–∏—Ç–∞–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é FastAPI –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ. `Form()` –∏–º–µ–µ—Ç –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `default`, –∞ –Ω–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π. –ï—Å–ª–∏ –≤—ã –ø–∏—à–µ—Ç–µ `Form([])`, —ç—Ç–æ –Ω–µ –¥–µ–ª–∞–µ—Ç —Ç–æ, —á—Ç–æ –≤—ã –¥—É–º–∞–µ—Ç–µ.

---

## üî¥ –ë–∞–≥ 5: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ category_id

### –°–∏–º–ø—Ç–æ–º—ã

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞ FastAPI –≤—ã–¥–∞–≤–∞–ª –æ—à–∏–±–∫—É 422: `value is not a valid integer` –¥–ª—è –ø–æ–ª—è `category_id`.

### –ü—Ä–∏—á–∏–Ω–∞

HTML-—Ñ–æ—Ä–º—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç **–≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏**. –î–∞–∂–µ –µ—Å–ª–∏ –≤ HTML –Ω–∞–ø–∏—Å–∞–Ω–æ `<option value="5">`, –±—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç `"5"`, –Ω–µ —á–∏—Å–ª–æ `5`.

–ú—ã –æ–±—ä—è–≤–ª—è–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –∫–∞–∫:

```python
category_id: int = Form(...)
```

FastAPI –ø—ã—Ç–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É `"5"` –≤ int, –Ω–æ —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç. –ò–Ω–æ–≥–¥–∞ FastAPI —Å—Ç—Ä–æ–∂–µ –∏ —Ç—Ä–µ–±—É–µ—Ç **—Ç–æ—á–Ω–æ–≥–æ** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–∏–ø—É.

### –†–µ—à–µ–Ω–∏–µ

–ü—Ä–∏–Ω–∏–º–∞–µ–º –∫–∞–∫ —Å—Ç—Ä–æ–∫—É –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤—Ä—É—á–Ω—É—é:

```python
category_id: str = Form(...)
# ... –ø–æ–∑–∂–µ –≤ –∫–æ–¥–µ:
product_data = ProductCreate(
    category_id=int(category_id),  # ‚Üê –Ø–≤–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
    ...
)
```

–¢–µ–ø–µ—Ä—å –º—ã –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ. –ï—Å–ª–∏ `category_id` –Ω–µ–≤–∞–ª–∏–¥–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"abc"`), `int()` –≤—ã–±—Ä–æ—Å–∏—Ç `ValueError`, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

### –£—Ä–æ–∫

–ù–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –∫–∞–∫ —Å—Ç—Ä–æ–∫—É, –≤–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ, –ø—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ. –≠—Ç–æ –¥–∞—ë—Ç –±–æ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –∏ –ª—É—á—à–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö.

---

## üî¥ –ë–∞–≥ 6: Lazy loading –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É raise_on_sql

### –°–∏–º–ø—Ç–æ–º—ã

–ü—Ä–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Jinja2 —à–∞–±–ª–æ–Ω –ø—ã—Ç–∞–ª—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å `{% if tag in product.tags %}`, –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–∞–¥–∞–ª–æ —Å –æ—à–∏–±–∫–æ–π: `This instance is detached from its Session, and lazy load operation cannot proceed`.

### –ü—Ä–∏—á–∏–Ω–∞

–ù–∞—à–∞ –º–æ–¥–µ–ª—å ProductORM –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å `lazy="raise_on_sql"` –¥–ª—è –≤—Å–µ—Ö relationships:

```python
class ProductORM(Base):
    tags = relationship("TagORM", secondary=product_tag_association, lazy="raise_on_sql")
```

–≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ **–∑–∞–ø—Ä–µ—â–∞–µ—Ç** –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –≠—Ç–æ –∑–∞—â–∏—Ç–∞ –æ—Ç N+1 –ø—Ä–æ–±–ª–µ–º—ã: –∫–æ–≥–¥–∞ –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º 100 —Ç–æ–≤–∞—Ä–æ–≤, –∞ –∑–∞—Ç–µ–º –≤ —Ü–∏–∫–ª–µ –æ–±—Ä–∞—â–∞–µ–º—Å—è –∫ `product.tags` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ, –ø–æ–ª—É—á–∞–µ—Ç—Å—è 101 –∑–∞–ø—Ä–æ—Å –∫ –ë–î (1 –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ + 100 –¥–ª—è —Ç–µ–≥–æ–≤).

–° `lazy="raise_on_sql"` –ª—é–±–∞—è –ø–æ–ø—ã—Ç–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –Ω–µ–∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–º—É relationship –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É. –ú—ã **–æ–±—è–∑–∞–Ω—ã** —è–≤–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `selectinload` –∏–ª–∏ `joinedload`.

–í —Ä–æ—É—Ç–µ –º—ã –∑–∞–≥—Ä—É–∂–∞–ª–∏ —Ç–æ–≤–∞—Ä:

```python
product = await get_product_by_id(session, product_id)
```

–ù–æ —Ñ—É–Ω–∫—Ü–∏—è `get_product_by_id` –Ω–µ –ø–æ–¥–≥—Ä—É–∂–∞–ª–∞ —Ç–µ–≥–∏. –ö–æ–≥–¥–∞ —à–∞–±–ª–æ–Ω –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ `product.tags`, SQLAlchemy –Ω–µ –º–æ–≥–ª–∞ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å (—Å–µ—Å—Å–∏—è —É–∂–µ –∑–∞–∫—Ä—ã—Ç–∞) –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–ª–∞ –æ—à–∏–±–∫—É.

### –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–∏–ª–∏ eager loading —Ç–µ–≥–æ–≤:

```python
from sqlalchemy.orm import selectinload

product_orm = await session.execute(
    select(ProductORM)
    .where(ProductORM.id == product_id)
    .options(selectinload(ProductORM.tags))  # ‚Üê –Ø–≤–Ω–æ –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–µ–≥–∏
)
product = product_orm.scalar_one_or_none()
```

–¢–∞–∫–∂–µ –¥–æ–±–∞–≤–∏–ª–∏ `session.refresh(product, ["tags"])` –≤ –º–µ—Å—Ç–∞, –≥–¥–µ —ç—Ç–æ –±—ã–ª–æ –ø—Ä–æ—â–µ, —á–µ–º –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å.

–¢–µ–ø–µ—Ä—å —Ç–µ–≥–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è **–æ–¥–Ω–∏–º** –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º (–±–ª–∞–≥–æ–¥–∞—Ä—è `selectinload`), –∏ —à–∞–±–ª–æ–Ω –º–æ–∂–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ `product.tags`.

### –£—Ä–æ–∫

`lazy="raise_on_sql"` ‚Äî —Ö–æ—Ä–æ—à–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞ –¥–ª—è production, –Ω–æ –æ–Ω–∞ —Ç—Ä–µ–±—É–µ—Ç –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã. –í—ã **–¥–æ–ª–∂–Ω—ã** —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å, –∫–∞–∫–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω—É–∂–Ω—ã. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

---

## üõ†Ô∏è –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–±–∞–≥–≥–∏–Ω–≥–∞

–ö–∞–∫ –º—ã –Ω–∞—Ö–æ–¥–∏–ª–∏ —ç—Ç–∏ –±–∞–≥–∏?

–î–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Ä–æ—É—Ç–æ–≤ —Å–º–æ—Ç—Ä–µ–ª–∏ –ª–æ–≥–∏ FastAPI –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –û–Ω–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≤—Å–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É—Ç–∏. –£–≤–∏–¥–µ–ª–∏, —á—Ç–æ `/auth/login` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.

–î–ª—è JWT audience –≤–∫–ª—é—á–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π. PyJWT –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç `InvalidAudienceError` —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º. –ü—Ä–æ—á–∏—Ç–∞–ª–∏ stacktrace, –Ω–∞—à–ª–∏ –º–µ—Å—Ç–æ, –≥–¥–µ –¥–µ–∫–æ–¥–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω, –¥–æ–±–∞–≤–∏–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä.

–î–ª—è HTML5 –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–∫—Ä—ã–ª–∏ DevTools –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ö–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞: —Ñ–æ—Ä–º–∞ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∏–∑-–∑–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–ª—è URL. –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª–∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –≤–∞–ª–∏–¥–Ω—ã–º URL ‚Äî —Å—Ä–∞–±–æ—Ç–∞–ª–æ. –ü–æ–Ω—è–ª–∏, —á—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–∏–ø–µ –ø–æ–ª—è.

–î–ª—è Form syntax —á–∏—Ç–∞–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é FastAPI. –†–∞–∑–¥–µ–ª –ø—Ä–æ Form –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä—ã —Å `default=`. –°—Ä–∞–≤–Ω–∏–ª–∏ —Å –Ω–∞—à–∏–º –∫–æ–¥–æ–º, —É–≤–∏–¥–µ–ª–∏ –æ—Ç–ª–∏—á–∏–µ.

–î–ª—è category_id –¥–æ–±–∞–≤–∏–ª–∏ print-–æ—Ç–ª–∞–¥–∫—É. –ù–∞–ø–µ—á–∞—Ç–∞–ª–∏ `type(category_id)` –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º ProductCreate. –£–≤–∏–¥–µ–ª–∏ `<class 'str'>`. –ü–æ–Ω—è–ª–∏, —á—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å.

–î–ª—è lazy loading –æ—à–∏–±–∫–∞ –±—ã–ª–∞ –æ—á–µ–≤–∏–¥–Ω–∞ –ø–æ traceback. SQLAlchemy —á—ë—Ç–∫–æ –≥–æ–≤–æ—Ä–∏—Ç: "Lazy load –∑–∞–ø—Ä–µ—â—ë–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π `raise_on_sql`". –î–æ–±–∞–≤–∏–ª–∏ `selectinload`.

---

## üìö –ò—Ç–æ–≥–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

–í—Å–µ —ç—Ç–∏ —Ñ–∏–∫—Å—ã –±—ã–ª–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç `d8f779e`. –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ç—Ä–æ–Ω—É–ª–∏:

**auth/dependencies.py**: –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `audience` –≤ `jwt.decode`.

**routes/auth.py**: –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã —Ä–æ—É—Ç—ã –≤ `login-page`, `login-form`, `register-form`.

**templates/auth.html**: –æ–±–Ω–æ–≤–ª–µ–Ω—ã action URL —Ñ–æ—Ä–º.

**templates/admin_product.html**: –∏–∑–º–µ–Ω—ë–Ω —Ç–∏–ø –ø–æ–ª—è `image_url` —Å `url` –Ω–∞ `text`.

**routes/admin.py**: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã `Form(default=[])` –¥–ª—è `tag_ids`, `category_id` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∫ `str` –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ `int`, –¥–æ–±–∞–≤–ª–µ–Ω `selectinload` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ–≥–æ–≤.

---

## üí° –†–µ–∑—é–º–µ

–ú—ã —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å —Å —à–µ—Å—Ç—å—é –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏ –±–∞–≥–∞–º–∏: –∫–æ–Ω—Ñ–ª–∏–∫—Ç —Ä–æ—É—Ç–æ–≤, –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ JWT audience, –±–ª–æ–∫–∏—Ä—É—é—â–∞—è HTML5 –≤–∞–ª–∏–¥–∞—Ü–∏—è, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Form, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤, –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–µ—Ç–µ lazy loading.

–ö–∞–∂–¥—ã–π –±–∞–≥ –Ω–∞—É—á–∏–ª –Ω–∞—Å —á–µ–º—É-—Ç–æ –≤–∞–∂–Ω–æ–º—É –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç FastAPI, PyJWT, HTML5, SQLAlchemy. –ú—ã —Å—Ç–∞–ª–∏ –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é fastapi-users, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–≤, —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

–ì–ª–∞–≤–Ω—ã–π —É—Ä–æ–∫: –±–∞–≥–∏ ‚Äî —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ. –í–∞–∂–Ω–æ –Ω–µ —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞–ø–∏—Å–∞–Ω–∏—è –∫–æ–¥–∞, –∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫. –•–æ—Ä–æ—à–µ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å—Ç–µ–∫—Ç—Ä–µ–π—Å–æ–≤, —á—Ç–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ ‚Äî –∫–ª—é—á–µ–≤—ã–µ –Ω–∞–≤—ã–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

–¢–µ–ø–µ—Ä—å –≤—Å—è —Å–∏—Å—Ç–µ–º–∞ cookie-based –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å HTMX —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ. –ú—ã –≥–æ—Ç–æ–≤—ã –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–º—É —Ä–∞–∑–≤–∏—Ç–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.
